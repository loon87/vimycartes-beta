<section id="partner-form" class="py-16 px-6 bg-white">
    <div class="max-w-4xl mx-auto">
        <h2 class="text-3xl font-bold mb-8 text-center">Devenir partenaire Vimycartes</h2>
        
        <form id="partnerRegistration" class="grid md:grid-cols-2 gap-6">
            <!-- Informations de l'entreprise -->
            <div class="md:col-span-2">
                <h3 class="text-xl font-semibold mb-4 border-b pb-2">Informations de l'entreprise</h3>
            </div>
            
            <div>
                <label for="companyName" class="block text-sm font-medium mb-1">Nom de l'entreprise *</label>
                <input type="text" id="companyName" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
            </div>
            
            <div>
                <label for="neNumber" class="block text-sm font-medium mb-1">Numéro NEQ *</label>
                <input type="text" id="neNumber" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
            </div>
            
            <div>
                <label for="businessType" class="block text-sm font-medium mb-1">Type d'entreprise *</label>
                <select id="businessType" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent custom-select">
                    <option value="">Sélectionnez...</option>
                    <option value="restaurant">Restaurant</option>
                    <option value="hotel">Hôtel</option>
                    <option value="spa">Spa/Bien-être</option>
                    <option value="activity">Activité/Expérience</option>
                    <option value="retail">Commerce de détail</option>
                    <option value="other">Autre</option>
                </select>
            </div>
            
            <div>
                <label for="website" class="block text-sm font-medium mb-1">Site web</label>
                <input type="url" id="website" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="https://">
            </div>
            
            <!-- Informations de contact -->
            <div class="md:col-span-2 mt-4">
                <h3 class="text-xl font-semibold mb-4 border-b pb-2">Informations de contact</h3>
            </div>
            
            <div>
                <label for="contactName" class="block text-sm font-medium mb-1">Nom complet *</label>
                <input type="text" id="contactName" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
            </div>
            
            <div>
                <label for="contactPosition" class="block text-sm font-medium mb-1">Poste *</label>
                <input type="text" id="contactPosition" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
            </div>
            
            <div>
                <label for="email" class="block text-sm font-medium mb-1">Email *</label>
                <input type="email" id="email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
            </div>
            
            <div>
                <label for="phone" class="block text-sm font-medium mb-1">Téléphone *</label>
                <input type="tel" id="phone" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
            </div>
            
            <!-- Adresse -->
            <div class="md:col-span-2 mt-4">
                <h3 class="text-xl font-semibold mb-4 border-b pb-2">Adresse de l'établissement</h3>
            </div>
            
            <div class="md:col-span-2">
                <label for="address" class="block text-sm font-medium mb-1">Adresse *</label>
                <input type="text" id="address" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
            </div>
            
            <div>
                <label for="city" class="block text-sm font-medium mb-1">Ville *</label>
                <input type="text" id="city" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
            </div>
            
            <div>
                <label for="postalCode" class="block text-sm font-medium mb-1">Code postal *</label>
                <input type="text" id="postalCode" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
            </div>
            
            <div class="md:col-span-2">
                <div class="flex items-start">
                    <input type="checkbox" id="terms" required class="mt-1 mr-2 custom-checkbox">
                    <label for="terms" class="text-sm">Je reconnais avoir lu et accepté les <a href="#" class="text-primary hover:underline">conditions générales</a> et la <a href="#" class="text-primary hover:underline">politique de confidentialité</a> de Vimycartes *</label>
                </div>
            </div>
            
            <div class="md:col-span-2 mt-4">
                <button type="submit" class="w-full px-6 py-3 bg-primary text-white font-bold rounded-lg hover:bg-secondary transition">Soumettre la demande</button>
            </div>
        </form>
    </div>
</section>
<!-- Modifiez votre section de recherche existante -->
<section class="py-8 px-6 bg-white shadow-lg -mt-12 mx-6 rounded-xl relative z-30">
    <div class="max-w-7xl mx-auto">
        <div class="grid md:grid-cols-4 gap-4">
            <!-- Vos sélecteurs existants... -->
            
            <div class="relative md:col-span-2">
                <input type="text" id="locationSearch" placeholder="Rechercher par localisation..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                <button id="currentLocation" class="absolute right-3 top-3 text-gray-400 hover:text-primary">
                    <i class="fas fa-location-arrow"></i>
                </button>
            </div>
            
            <div>
                <button id="advancedSearch" class="w-full px-4 py-3 border border-primary text-primary font-medium rounded-lg hover:bg-primary hover:text-white transition flex items-center justify-center">
                    <i class="fas fa-sliders-h mr-2"></i> Avancée
                </button>
            </div>
            
            <div>
                <button class="w-full px-4 py-3 bg-primary text-white font-medium rounded-lg hover:bg-secondary transition flex items-center justify-center">
                    <i class="fas fa-search mr-2"></i> Rechercher
                </button>
            </div>
        </div>
        
        <!-- Panneau de recherche avancée (caché par défaut) -->
        <div id="advancedSearchPanel" class="hidden mt-6 p-6 bg-gray-50 rounded-lg">
            <div class="grid md:grid-cols-3 gap-6">
                <div>
                    <label class="block text-sm font-medium mb-1">Prix</label>
                    <div class="space-y-2">
                        <div class="flex items-center">
                            <input type="radio" id="priceAny" name="price" checked class="custom-radio mr-2">
                            <label for="priceAny">Tous les prix</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" id="priceUnder50" name="price" class="custom-radio mr-2">
                            <label for="priceUnder50">Moins de 50$</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" id="price50to100" name="price" class="custom-radio mr-2">
                            <label for="price50to100">50$ à 100$</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" id="priceOver100" name="price" class="custom-radio mr-2">
                            <label for="priceOver100">Plus de 100$</label>
                        </div>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-1">Note minimale</label>
                    <select class="w-full px-4 py-2 border border-gray-300 rounded-lg custom-select">
                        <option value="0">Toutes notes</option>
                        <option value="3">3 étoiles et plus</option>
                        <option value="4">4 étoiles et plus</option>
                        <option value="5">5 étoiles uniquement</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-1">Options</label>
                    <div class="space-y-2">
                        <div class="flex items-center">
                            <input type="checkbox" id="wifi" class="custom-checkbox mr-2">
                            <label for="wifi">Accès handicapé</label>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="parking" class="custom-checkbox mr-2">
                            <label for="parking">Stationnement</label>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="vegetarian" class="custom-checkbox mr-2">
                            <label for="vegetarian">Options végétariennes</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
// Script pour la localisation et recherche avancée
document.getElementById('currentLocation').addEventListener('click', function() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            // Ici vous pourriez utiliser l'API Google Maps pour obtenir l'adresse
            document.getElementById('locationSearch').value = "Position actuelle";
            // Vous pourriez aussi stocker lat/lng pour la recherche
        });
    } else {
        alert("La géolocalisation n'est pas supportée par votre navigateur.");
    }
});

document.getElementById('advancedSearch').addEventListener('click', function() {
    const panel = document.getElementById('advancedSearchPanel');
    panel.classList.toggle('hidden');
});
</script>
<!-- Modifiez chaque carte de catégorie comme ceci -->
<a href="/categories/restaurants" class="group">
    <div class="relative overflow-hidden rounded-xl h-48 card-hover">
        <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="Restaurants" class="w-full h-full object-cover transition duration-500 group-hover:scale-110">
        <div class="absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center">
            <h3 class="text-white text-xl font-bold">Restaurants</h3>
        </div>
    </div>
</a>
<section id="about" class="py-16 px-6 bg-light">
    <div class="max-w-4xl mx-auto">
        <h2 class="text-3xl font-bold mb-8 text-center">En savoir plus sur Vimycartes</h2>
        
        <div class="bg-white p-8 rounded-xl shadow-md mb-8">
            <h3 class="text-xl font-bold mb-4 text-primary">Notre mission</h3>
            <p class="text-gray-600 mb-4">Vimycartes a été créé avec une vision simple : transformer la façon dont nous offrons des cadeaux en mettant en valeur les commerces locaux et les expériences authentiques.</p>
            <p class="text-gray-600">Nous croyons qu'un cadeau a plus de valeur lorsqu'il crée des souvenirs et soutient l'économie locale.</p>
        </div>
        
        <div class="grid md:grid-cols-2 gap-8 mb-8">
            <div class="bg-white p-8 rounded-xl shadow-md">
                <h3 class="text-xl font-bold mb-4 text-primary">Comment ça marche</h3>
                <ol class="list-decimal list-inside space-y-3 text-gray-600">
                    <li>Choisissez une expérience parmi nos partenaires locaux</li>
                    <li>Personnalisez votre carte avec un message et/ou une photo</li>
                    <li>Envoyez la carte par email ou SMS, ou imprimez-la</li>
                    <li>Le bénéficiaire présente le QR code à l'établissement</li>
                </ol>
            </div>
            
            <div class="bg-white p-8 rounded-xl shadow-md">
                <h3 class="text-xl font-bold mb-4 text-primary">Nos engagements</h3>
                <ul class="space-y-3 text-gray-600">
                    <li class="flex items-start">
                        <i class="fas fa-check-circle text-primary mt-1 mr-2"></i>
                        <span>Sélection rigoureuse de nos partenaires</span>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-check-circle text-primary mt-1 mr-2"></i>
                        <span>Transactions sécurisées</span>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-check-circle text-primary mt-1 mr-2"></i>
                        <span>Support client 7j/7</span>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-check-circle text-primary mt-1 mr-2"></i>
                        <span>Politique de remboursement flexible</span>
                    </li>
                </ul>
            </div>
        </div>
        
        <div class="bg-white p-8 rounded-xl shadow-md">
            <h3 class="text-xl font-bold mb-4 text-primary">L'équipe</h3>
            <p class="text-gray-600 mb-6">Nous sommes une équipe de passionnés basés à Montréal, déterminés à créer des connexions significatives entre les entreprises locales et leurs clients.</p>
            
            <div class="grid sm:grid-cols-3 gap-6">
                <div class="text-center">
                    <div class="w-24 h-24 rounded-full overflow-hidden mx-auto mb-3">
                        <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Marie Dupont" class="w-full h-full object-cover">
                    </div>
                    <h4 class="font-bold">Marie Dupont</h4>
                    <p class="text-sm text-gray-500">Fondatrice & CEO</p>
                </div>
                
                <div class="text-center">
                    <div class="w-24 h-24 rounded-full overflow-hidden mx-auto mb-3">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Jean Tremblay" class="w-full h-full object-cover">
                    </div>
                    <h4 class="font-bold">Jean Tremblay</h4>
                    <p class="text-sm text-gray-500">Directeur Technique</p>
                </div>
                
                <div class="text-center">
                    <div class="w-24 h-24 rounded-full overflow-hidden mx-auto mb-3">
                        <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="Sophie Martin" class="w-full h-full object-cover">
                    </div>
                    <h4 class="font-bold">Sophie Martin</h4>
                    <p class="text-sm text-gray-500">Responsable Partenariats</p>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Ajoutez ceci dans votre navigation -->
<div class="flex items-center space-x-4">
    <a href="/espace-partenaire" class="hidden md:block px-4 py-2 border border-primary text-primary font-medium rounded-full hover:bg-primary hover:text-white transition">Espace partenaire</a>
    <a href="#" class="px-4 py-2 bg-primary text-white font-medium rounded-full hover:bg-secondary transition">S'inscrire</a>
</div>

<!-- Page de connexion (à créer dans un nouveau fichier) -->
<section id="partner-login" class="py-16 px-6 bg-light min-h-screen">
    <div class="max-w-md mx-auto bg-white p-8 rounded-xl shadow-md">
        <h2 class="text-2xl font-bold mb-6 text-center">Connexion espace partenaire</h2>
        
        <form id="partnerLoginForm" class="space-y-6">
            <div>
                <label for="loginEmail" class="block text-sm font-medium mb-1">Email *</label>
                <input type="email" id="loginEmail" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
            </div>
            
            <div>
                <label for="loginPassword" class="block text-sm font-medium mb-1">Mot de passe *</label>
                <input type="password" id="loginPassword" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
            </div>
            
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <input type="checkbox" id="rememberMe" class="custom-checkbox mr-2">
                    <label for="rememberMe" class="text-sm">Se souvenir de moi</label>
                </div>
                <a href="#" class="text-sm text-primary hover:underline">Mot de passe oublié ?</a>
            </div>
            
            <button type="submit" class="w-full px-6 py-3 bg-primary text-white font-bold rounded-lg hover:bg-secondary transition">Se connecter</button>
            
            <div class="text-center text-sm">
                <p>Pas encore de compte ? <a href="/espace-partenaire/inscription" class="text-primary hover:underline">Créer un compte</a></p>
            </div>
        </form>
    </div>
</section>

<!-- Page d'inscription partenaire -->
<section id="partner-signup" class="py-16 px-6 bg-light min-h-screen">
    <div class="max-w-md mx-auto bg-white p-8 rounded-xl shadow-md">
        <h2 class="text-2xl font-bold mb-6 text-center">Créer un compte partenaire</h2>
        
        <form id="partnerSignupForm" class="space-y-6">
            <div>
                <label for="signupEmail" class="block text-sm font-medium mb-1">Email *</label>
                <input type="email" id="signupEmail" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
            </div>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label for="signupPassword" class="block text-sm font-medium mb-1">Mot de passe *</label>
                    <input type="password" id="signupPassword" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
                
                <div>
                    <label for="signupConfirm" class="block text-sm font-medium mb-1">Confirmer *</label>
                    <input type="password" id="signupConfirm" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                </div>
            </div>
            
            <div class="flex items-start">
                <input type="checkbox" id="acceptTerms" required class="mt-1 mr-2 custom-checkbox">
                <label for="acceptTerms" class="text-sm">J'accepte les <a href="#" class="text-primary hover:underline">conditions d'utilisation</a> et la <a href="#" class="text-primary hover:underline">politique de confidentialité</a> *</label>
            </div>
            
            <button type="submit" class="w-full px-6 py-3 bg-primary text-white font-bold rounded-lg hover:bg-secondary transition">Créer mon compte</button>
            
            <div class="text-center text-sm">
                <p>Déjà un compte ? <a href="/espace-partenaire" class="text-primary hover:underline">Se connecter</a></p>
            </div>
        </form>
    </div>
</section>
<!-- Ajoutez ceci dans votre processus d'achat -->
<section id="payment" class="py-16 px-6 bg-white">
    <div class="max-w-2xl mx-auto">
        <h2 class="text-2xl font-bold mb-8">Paiement sécurisé</h2>
        
        <div class="bg-gray-50 p-6 rounded-xl mb-8">
            <div class="flex justify-between items-center mb-4">
                <h3 class="font-medium">Total à payer</h3>
                <span class="text-xl font-bold">150.00$</span>
            </div>
            <div class="flex justify-between items-center text-sm text-gray-500">
                <span>Dont commission Vimycartes (15%)</span>
                <span>22.50$</span>
            </div>
        </div>
        
        <form id="payment-form" class="space-y-6">
            <div>
                <label class="block text-sm font-medium mb-1">Informations de carte</label>
                <!-- Stripe Card Element sera injecté ici -->
                <div id="card-element" class="p-3 border border-gray-300 rounded-lg"></div>
                <div id="card-errors" role="alert" class="text-sm text-red-500 mt-2"></div>
            </div>
            
            <div class="flex items-start">
                <input type="checkbox" id="saveCard" class="custom-checkbox mr-2 mt-1">
                <label for="saveCard" class="text-sm">Enregistrer cette carte pour mes prochains paiements</label>
            </div>
            
            <button type="submit" id="submit-payment" class="w-full px-6 py-3 bg-primary text-white font-bold rounded-lg hover:bg-secondary transition disabled:opacity-50">
                <span id="button-text">Payer maintenant</span>
                <span id="button-spinner" class="hidden">
                    <i class="fas fa-spinner fa-spin mr-2"></i> Traitement...
                </span>
            </button>
            
            <div class="flex justify-center">
                <img src="https://stripe.com/img/v3/payments/payments-sprite.svg" alt="Méthodes de paiement acceptées" class="h-8">
            </div>
        </form>
    </div>
</section>

<!-- Ajoutez ces scripts pour Stripe -->
<script src="https://js.stripe.com/v3/"></script>
<script>
// Initialisez Stripe avec votre clé publique
const stripe = Stripe('pk_test_votre_cle_publique_stripe');
const elements = stripe.elements();

// Créez un élément de carte
const card = elements.create('card', {
    style: {
        base: {
            fontSize: '16px',
            color: '#32325d',
            '::placeholder': {
                color: '#aab7c4'
            }
        },
        invalid: {
            color: '#fa755a',
            iconColor: '#fa755a'
        }
    }
});

// Montez l'élément de carte dans le DOM
card.mount('#card-element');

// Gérez les erreurs de saisie de la carte
card.addEventListener('change', function(event) {
    const displayError = document.getElementById('card-errors');
    if (event.error) {
        displayError.textContent = event.error.message;
    } else {
        displayError.textContent = '';
    }
});

// Gérez la soumission du formulaire
const form = document.getElementById('payment-form');
form.addEventListener('submit', async function(event) {
    event.preventDefault();
    
    const submitButton = document.getElementById('submit-payment');
    const buttonText = document.getElementById('button-text');
    const buttonSpinner = document.getElementById('button-spinner');
    
    // Désactivez le bouton et affichez le spinner
    submitButton.disabled = true;
    buttonText.classList.add('hidden');
    buttonSpinner.classList.remove('hidden');
    
    // Créez un token de paiement avec Stripe
    const {token, error} = await stripe.createToken(card);
    
    if (error) {
        // Affichez les erreurs
        const errorElement = document.getElementById('card-errors');
        errorElement.textContent = error.message;
        
        // Réactivez le bouton
        submitButton.disabled = false;
        buttonText.classList.remove('hidden');
        buttonSpinner.classList.add('hidden');
    } else {
        // Envoyez le token à votre serveur
        stripeTokenHandler(token);
    }
});

function stripeTokenHandler(token) {
    // Ici, vous enverriez normalement le token à votre serveur
    // pour traiter le paiement. Ceci est un exemple simplifié.
    console.log('Token créé:', token);
    
    // Simulez un traitement réussi
    setTimeout(() => {
        alert('Paiement réussi! Merci pour votre achat.');
        // Redirigez vers une page de confirmation
        window.location.href = '/confirmation';
    }, 1500);
}
</script>
<!-- Modifiez votre section de forfaits comme ceci -->
<div class="grid md:grid-cols-3 gap-6">
    <!-- Forfait Essentiel -->
    <div class="bg-white bg-opacity-10 rounded-lg p-6 backdrop-blur-sm border border-white border-opacity-20 card-hover">
        <!-- ... Contenu existant ... -->
        <button data-plan="essentiel" class="block w-full py-2 bg-white text-primary font-bold rounded hover:bg-gray-100 transition subscribe-btn">Choisir</button>
    </div>
    
    <!-- Forfait Premium -->
    <div class="bg-white bg-opacity-20 rounded-lg p-6 backdrop-blur-sm border border-white border-opacity-30 card-hover transform scale-105">
        <!-- ... Contenu existant ... -->
        <button data-plan="premium" class="block w-full py-2 bg-white text-primary font-bold rounded hover:bg-gray-100 transition subscribe-btn">Choisir</button>
    </div>
    
    <!-- Forfait Élite -->
    <div class="bg-white bg-opacity-10 rounded-lg p-6 backdrop-blur-sm border border-white border-opacity-20 card-hover">
        <!-- ... Contenu existant ... -->
        <button data-plan="elite" class="block w-full py-2 bg-white text-primary font-bold rounded hover:bg-gray-100 transition subscribe-btn">Choisir</button>
    </div>
</div>

<script>
// Gestion des abonnements avec Stripe
document.querySelectorAll('.subscribe-btn').forEach(button => {
    button.addEventListener('click', function() {
        const plan = this.getAttribute('data-plan');
        
        // Ici, vous feriez normalement une requête à votre backend
        // pour créer une session de checkout Stripe
        fetch('/create-subscription', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                plan: plan,
                // Autres données nécessaires
            }),
        })
        .then(response => response.json())
        .then(session => {
            // Redirigez vers Stripe Checkout
            return stripe.redirectToCheckout({ sessionId: session.id });
        })
        .then(result => {
            if (result.error) {
                alert(result.error.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
        });
    });
});
</script>
